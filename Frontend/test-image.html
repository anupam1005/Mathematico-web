<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Loading Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-image { max-width: 300px; margin: 10px; border: 1px solid #ccc; }
        .error { color: red; }
        .success { color: green; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>Image Loading Test</h1>
    
    <h2>Test 1: Direct Backend URL</h2>
    <p class="info">Testing direct access to backend uploads</p>
    <img src="https://mathematico-backend-new.vercel.app/uploads/thumbnailImage-1756897121369-340480055-download.png" 
         alt="Test 1" class="test-image" 
         onload="console.log('✅ Test 1: Image loaded successfully')"
         onerror="console.log('❌ Test 1: Image failed to load')">
    
    <h2>Test 2: Constructed URL</h2>
    <p class="info">Testing URL construction logic</p>
    <div id="test2-result"></div>
    
    <h2>Test 3: Environment Variables</h2>
    <div id="env-info"></div>
    
    <h2>Test 4: Backend Health Check</h2>
    <div id="health-check"></div>
    
    <script>
        // Test 2: URL Construction
        function testUrlConstruction() {
            const imagePath = '/uploads/thumbnailImage-1756897121369-340480055-download.png';
            const backendBaseUrl = 'https://mathematico-backend-new.vercel.app';
            const fullUrl = `${backendBaseUrl}${imagePath}`;
            
            document.getElementById('test2-result').innerHTML = `
                <p><strong>Input path:</strong> ${imagePath}</p>
                <p><strong>Backend base:</strong> ${backendBaseUrl}</p>
                <p><strong>Full URL:</strong> ${fullUrl}</p>
                <img src="${fullUrl}" alt="Test 2" class="test-image"
                     onload="console.log('✅ Test 2: Constructed URL image loaded')"
                     onerror="console.log('❌ Test 2: Constructed URL image failed')">
            `;
        }
        
        // Test 3: Environment Info
        function showEnvInfo() {
            document.getElementById('env-info').innerHTML = `
                <p><strong>Current location:</strong> ${window.location.href}</p>
                <p><strong>Protocol:</strong> ${window.location.protocol}</p>
                <p><strong>Host:</strong> ${window.location.host}</p>
                <p><strong>Port:</strong> ${window.location.port}</p>
            `;
        }
        
        // Test 4: Backend Health Check
        async function checkBackendHealth() {
            try {
                const response = await fetch('https://mathematico-backend-new.vercel.app/api/v1/health');
                const data = await response.json();
                document.getElementById('health-check').innerHTML = `
                    <p class="success">✅ Backend is reachable</p>
                    <p><strong>Status:</strong> ${data.status}</p>
                    <p><strong>Message:</strong> ${data.message}</p>
                `;
            } catch (error) {
                document.getElementById('health-check').innerHTML = `
                    <p class="error">❌ Backend is not reachable</p>
                    <p><strong>Error:</strong> ${error.message}</p>
                `;
            }
        }
        
        // Run tests when page loads
        window.onload = function() {
            testUrlConstruction();
            showEnvInfo();
            checkBackendHealth();
        };
    </script>
</body>
</html>
